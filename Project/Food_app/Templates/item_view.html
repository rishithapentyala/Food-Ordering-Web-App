{% extends "layouts/main.html" %}
{% load static %}
{% load humanize %}

{% block content %}
<div class="container my-4">
    <div class="row">
        <div class="col-12 mb-3">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'Home' %}">Home</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'Category' %}">Categories</a></li>
                    <li class="breadcrumb-item active" aria-current="page">{{ category.food_names }}</li>
                </ol>
            </nav>
            <h2 class="text-center">{{ category.food_names }}</h2>
            <hr>
        </div>

        {% for item in items %}
        <div class="col-md-4 col-lg-3">
            <div class="card mb-4 h-100 shadow-sm">
                <a href="{% url 'Product_detail' category.food_names item.name %}">
                    <img src="{{ item.item_image.url }}" class="card-img-top" alt="{{ item.name }}">
                </a>
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title text-primary">{{ item.name }}</h5>
                    <p class="card-text">
                        <span class="text-muted"><s>Rs. {{ item.price|floatformat:0|intcomma }}</s></span><br>
                        <span class="fw-bold text-success">Now: Rs. {{ item.offer_price|floatformat:0|intcomma }}</span>
                    </p>
                    <a href="{% url 'Product_detail' category.food_names item.name %}" class="btn btn-outline-primary mt-auto">View Details</a>
                </div>
            </div>
        </div>
        {% empty %}
            <div class="col-12">
                <p class="text-center">No items found in this category.</p>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
